<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Ad Manager Script Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
</head>

<body>
    <div class="container mt-5">
        <h1 class="text-center">Google Ad Manager Script Generator</h1>

        <form id="scriptForm">
            <!-- Akun GAM -->
            <div class="mb-3">
                <label for="akunGAM" class="form-label">Akun GAM</label>
                <select id="akunGAM" class="form-select" required>
                    <option value="" disabled selected>Pilih Akun GAM</option>
                    <option value="21847396155">21847396155 (GAM Ayo)</option>
                    <option value="22579199035">22579199035 (GAM Promedia)</option>
                    <option value="22644494876">22644494876 (GAM Jatim)</option>
                </select>
            </div>

            <!-- Ad Unit -->
            <div class="mb-3">
                <label for="adUnit" class="form-label">Ad Unit</label>
                <select id="adUnit" class="form-select" required></select>
            </div>

            <!-- Device Category -->
            <div class="mb-3">
                <label class="form-label">Device Category</label><br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="m" value="mobile">
                    <label class="form-check-label" for="mobile">Mobile</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" id="d" value="desktop">
                    <label class="form-check-label" for="desktop">Desktop</label>
                </div>
            </div>

            <!-- Key Value -->
            <div class="mb-3">
                <label class="form-label">Key Value</label><br>
                <!-- Home KeyValues -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileTopHome" value="mobileTopHome">
                    <label class="form-check-label" for="mobileTopHome">mobileTopHome => [320, 100]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileBottomBannerHome"
                        value="mobileBottomBannerHome">
                    <label class="form-check-label" for="mobileBottomBannerHome">mobileBottomBannerHome => [300,
                        600],[320, 480],[300, 250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileBottomFrameHome"
                        value="mobileBottomFrameHome">
                    <label class="form-check-label" for="mobileBottomFrameHome">mobileBottomFrameHome => [320,
                        50],[320,100]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB1Home" value="mobileRB1Home">
                    <label class="form-check-label" for="mobileRB1Home">mobileRB1Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB2Home" value="mobileRB2Home">
                    <label class="form-check-label" for="mobileRB2Home">mobileRB2Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB3Home" value="mobileRB3Home">
                    <label class="form-check-label" for="mobileRB3Home">mobileRB3Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB4Home" value="mobileRB4Home">
                    <label class="form-check-label" for="mobileRB4Home">mobileRB4Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopTopHome" value="desktopTopHome">
                    <label class="form-check-label" for="desktopTopHome">desktopTopHome => [970, 250],[970, 90],[728,
                        250],[728, 90]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopGiantHome" value="desktopGiantHome">
                    <label class="form-check-label" for="desktopGiantHome">desktopGiantHome => [300, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopSkinAdsLeftHome"
                        value="desktopSkinAdsLeftHome">
                    <label class="form-check-label" for="desktopSkinAdsLeftHome">desktopSkinAdsLeftHome => [160,
                        600],[120, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopSkinAdsRightHome"
                        value="desktopSkinAdsRightHome">
                    <label class="form-check-label" for="desktopSkinAdsRightHome">desktopSkinAdsRightHome => [160,
                        600],[120, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopBottomFrameHome"
                        value="desktopBottomFrameHome">
                    <label class="form-check-label" for="desktopBottomFrameHome">desktopBottomFrameHome => [970,
                        90],[728,90]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB1Home" value="desktopRB1Home">
                    <label class="form-check-label" for="desktopRB1Home">desktopRB1Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB2Home" value="desktopRB2Home">
                    <label class="form-check-label" for="desktopRB2Home">desktopRB2Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB3Home" value="desktopRB3Home">
                    <label class="form-check-label" for="desktopRB3Home">desktopRB3Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB4Home" value="desktopRB4Home">
                    <label class="form-check-label" for="desktopRB4Home">desktopRB4Home => [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopMCB1Home" value="desktopMCB1Home">
                    <label class="form-check-label" for="desktopMCB1Home">desktopMCB1Home => [728, 90],[468, 60]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopMCB2Home" value="desktopMCB2Home">
                    <label class="form-check-label" for="desktopMCB2Home">desktopMCB2Home => [728, 90],[468, 60]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopMCB3Home" value="desktopMCB3Home">
                    <label class="form-check-label" for="desktopMCB3Home">desktopMCB3Home => [728, 90],[468, 60]</label>
                </div>

                <!-- Section KeyValues -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileTopSection" value="mobileTopSection">
                    <label class="form-check-label" for="mobileTopSection">mobileTopSection => [320, 100]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileBottomBannerSection"
                        value="mobileBottomBannerSection">
                    <label class="form-check-label" for="mobileBottomBannerSection">mobileBottomBannerSection => [300,
                        250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileBottomFrameSection"
                        value="mobileBottomFrameSection">
                    <label class="form-check-label" for="mobileBottomFrameSection">mobileBottomFrameSection => [320,
                        50],[320,100]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB1Section" value="mobileRB1Section">
                    <label class="form-check-label" for="mobileRB1Section">mobileRB1Section =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB2Section" value="mobileRB2Section">
                    <label class="form-check-label" for="mobileRB2Section">mobileRB2Section =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB3Section" value="mobileRB3Section">
                    <label class="form-check-label" for="mobileRB3Section">mobileRB3Section =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB4Section" value="mobileRB4Section">
                    <label class="form-check-label" for="mobileRB4Section">mobileRB4Section =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopTopSection" value="desktopTopSection">
                    <label class="form-check-label" for="desktopTopSection">desktopTopSection => [728, 90]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopGiantSection"
                        value="desktopGiantSection">
                    <label class="form-check-label" for="desktopGiantSection">desktopGiantSection => [300, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopSkinAdsLeftSection"
                        value="desktopSkinAdsLeftSection">
                    <label class="form-check-label" for="desktopSkinAdsLeftSection">desktopSkinAdsLeftSection => [160,
                        600],[120, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopSkinAdsRightSection"
                        value="desktopSkinAdsRightSection">
                    <label class="form-check-label" for="desktopSkinAdsRightSection">desktopSkinAdsRightSection => [160,
                        600],[120, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopBottomFrameSection"
                        value="desktopBottomFrameSection">
                    <label class="form-check-label" for="desktopBottomFrameSection">desktopBottomFrameSection => [970,
                        90],[728,90]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB1Section" value="desktopRB1Section">
                    <label class="form-check-label" for="desktopRB1Section">desktopRB1Section =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopMCB1Section" value="desktopMCB1Section">
                    <label class="form-check-label" for="desktopMCB1Section">desktopMCB1Section => [728, 90],[468,
                        60]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopMCB2Section" value="desktopMCB2Section">
                    <label class="form-check-label" for="desktopMCB2Section">desktopMCB2Section => [728, 90],[468,
                        60]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopMCB3Section" value="desktopMCB3Section">
                    <label class="form-check-label" for="desktopMCB3Section">desktopMCB3Section => [728, 90],[468,
                        60]</label>
                </div>

                <!-- Detail KeyValues -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileTopDetail" value="mobileTopDetail">
                    <label class="form-check-label" for="mobileTopDetail">mobileTopDetail => [320, 100]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileBottomBannerDetail"
                        value="mobileBottomBannerDetail">
                    <label class="form-check-label" for="mobileBottomBannerDetail">mobileBottomBannerDetail => [300,
                        250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileBottomFrameDetail"
                        value="mobileBottomFrameDetail">
                    <label class="form-check-label" for="mobileBottomFrameDetail">mobileBottomFrameDetail => [320,
                        50],[320,100]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileInArticle" value="mobileInArticle">
                    <label class="form-check-label" for="mobileInArticle">mobileInArticle => [1, 1], "fluid", [300,
                        250], [336, 280], [336, 420]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB1Detail" value="mobileRB1Detail">
                    <label class="form-check-label" for="mobileRB1Detail">mobileRB1Detail =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB2Detail" value="mobileRB2Detail">
                    <label class="form-check-label" for="mobileRB2Detail">mobileRB2Detail =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileRB3Detail" value="mobileRB3Detail">
                    <label class="form-check-label" for="mobileRB3Detail">mobileRB3Detail =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="mobileUnderImage" value="mobileUnderImage">
                    <label class="form-check-label" for="mobileUnderImage">mobileUnderImage => [300, 100],[300,
                        75],[300, 50],[320, 100],[320, 50],[300, 250],[336, 280]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopTopDetail" value="desktopTopDetail">
                    <label class="form-check-label" for="desktopTopDetail">desktopTopDetail => [728, 90]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopGiantDetail" value="desktopGiantDetail">
                    <label class="form-check-label" for="desktopGiantDetail">desktopGiantDetail => [300, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopSkinAdsLeftDetail"
                        value="desktopSkinAdsLeftDetail">
                    <label class="form-check-label" for="desktopSkinAdsLeftDetail">desktopSkinAdsLeftDetail => [160,
                        600],[120, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopSkinAdsRightDetail"
                        value="desktopSkinAdsRightDetail">
                    <label class="form-check-label" for="desktopSkinAdsRightDetail">desktopSkinAdsRightDetail => [160,
                        600],[120, 600]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopBottomFrameDetail"
                        value="desktopBottomFrameDetail">
                    <label class="form-check-label" for="desktopBottomFrameDetail">desktopBottomFrameDetail => [970,
                        90],[728,90]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopInArticle" value="desktopInArticle">
                    <label class="form-check-label" for="desktopInArticle">desktopInArticle => [1, 1],[336,280]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB1Detail" value="desktopRB1Detail">
                    <label class="form-check-label" for="desktopRB1Detail">desktopRB1Detail =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB2Detail" value="desktopRB2Detail">
                    <label class="form-check-label" for="desktopRB2Detail">desktopRB2Detail =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopRB3Detail" value="desktopRB3Detail">
                    <label class="form-check-label" for="desktopRB3Detail">desktopRB3Detail =>
                        [336,280],[300,250]</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="desktopUnderImage" value="desktopUnderImage">
                    <label class="form-check-label" for="desktopUnderImage">desktopUnderImage => [468, 60],[728,
                        90]</label>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">Generate Script</button>
        </form>

        <h2 class="mt-5 d-flex justify-content-between align-items-center">
            Generated Script for Mobile
            <button id="copyMobile" class="btn btn-sm btn-secondary">Copy</button>
        </h2>
        <pre id="mobileGeneratedScript" class="bg-light p-3 border"></pre>

        <h2 class="mt-5 d-flex justify-content-between align-items-center">
            Generated Script for Desktop
            <button id="copyDesktop" class="btn btn-sm btn-secondary">Copy</button>
        </h2>
        <pre id="desktopGeneratedScript" class="bg-light p-3 border"></pre>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        // Example Ad Unit Data
        const adUnits = [
            "ayobandung.com", "ayojakarta.com", "ayojogja.com", "ayobogor.com", "ayosemarang.com"
        ];

        // Initialize Ad Unit Select with Search Feature
        $(document).ready(() => {
            $('#adUnit').select2({
                data: adUnits.map(adUnit => ({ id: adUnit, text: adUnit })),
                placeholder: "Pilih Ad Unit",
                allowClear: true
            });
        });

        // Key Value Slot Sizes
        const keyValueSlotSizes = {
            // Home KeyValues
            "mobileTopHome": [[320, 100]],
            "mobileBottomBannerHome": [[300, 600], [320, 480], [300, 250]],
            "mobileBottomFrameHome": [[320, 50], [320, 100]],
            "mobileRB1Home": [[336, 280], [300, 250]],
            "mobileRB2Home": [[336, 280], [300, 250]],
            "mobileRB3Home": [[336, 280], [300, 250]],
            "mobileRB4Home": [[336, 280], [300, 250]],
            "desktopTopHome": [[970, 250], [970, 90], [728, 250], [728, 90]],
            "desktopGiantHome": [[300, 600]],
            "desktopSkinAdsLeftHome": [[160, 600], [120, 600]],
            "desktopSkinAdsRightHome": [[160, 600], [120, 600]],
            "desktopBottomFrameHome": [[970, 90], [728, 90]],
            "desktopRB1Home": [[336, 280], [300, 250]],
            "desktopRB2Home": [[336, 280], [300, 250]],
            "desktopRB3Home": [[336, 280], [300, 250]],
            "desktopRB4Home": [[336, 280], [300, 250]],
            "desktopMCB1Home": [[728, 90], [468, 60]],
            "desktopMCB2Home": [[728, 90], [468, 60]],
            "desktopMCB3Home": [[728, 90], [468, 60]],

            // Section KeyValues
            "mobileTopSection": [[320, 100]],
            "mobileBottomBannerSection": [[300, 600], [320, 480], [300, 250]],
            "mobileBottomFrameSection": [[320, 50], [320, 100]],
            "mobileRB1Section": [[336, 280], [300, 250]],
            "mobileRB2Section": [[336, 280], [300, 250]],
            "mobileRB3Section": [[336, 280], [300, 250]],
            "mobileRB4Section": [[336, 280], [300, 250]],
            "desktopTopSection": [[728, 90]],
            "desktopGiantSection": [[300, 600]],
            "desktopSkinAdsLeftSection": [[160, 600], [120, 600]],
            "desktopSkinAdsRightSection": [[160, 600], [120, 600]],
            "desktopBottomFrameSection": [[970, 90], [728, 90]],
            "desktopRB1Section": [[336, 280], [300, 250]],
            "desktopMCB1Section": [[728, 90], [468, 60]],
            "desktopMCB2Section": [[728, 90], [468, 60]],
            "desktopMCB3Section": [[728, 90], [468, 60]],

            // Detail KeyValues
            "mobileTopDetail": [[320, 100]],
            "mobileBottomBannerDetail": [[300, 250]],
            "mobileBottomFrameDetail": [[320, 50], [320, 100]],
            "mobileInArticle": [[1, 1], [300, 250], [336, 280]],
            "mobileRB1Detail": [[336, 280], [300, 250]],
            "mobileRB2Detail": [[336, 280], [300, 250]],
            "mobileRB3Detail": [[336, 280], [300, 250]],
            "mobileUnderImage": [[300, 100], [300, 75], [300, 50], [320, 100], [320, 50], [300, 250], [336, 280]],
            "desktopTopDetail": [[728, 90]],
            "desktopGiantDetail": [[300, 600]],
            "desktopSkinAdsLeftDetail": [[160, 600], [120, 600]],
            "desktopSkinAdsRightDetail": [[160, 600], [120, 600]],
            "desktopBottomFrameDetail": [[970, 90], [728, 90]],
            "desktopInArticle": [[1, 1], [336, 280]],
            "desktopRB1Detail": [[336, 280], [300, 250]],
            "desktopRB2Detail": [[336, 280], [300, 250]],
            "desktopRB3Detail": [[336, 280], [300, 250]],
            "desktopUnderImage": [[468, 60], [728, 90]],
        };

        // Logika untuk mengatur keyValue yang dapat dipilih berdasarkan Device Category
        document.querySelectorAll('input[type=checkbox][id^="mobile"], input[type=checkbox][id^="desktop"]').forEach(el => {
            el.disabled = true; // Awalnya semua keyValue dimatikan
        });

        document.querySelectorAll('input[type=checkbox][id$="m"], input[type=checkbox][id$="d"]').forEach(categoryCheckbox => {
            categoryCheckbox.addEventListener('change', () => {
                const isMobileSelected = document.getElementById('m').checked;
                const isDesktopSelected = document.getElementById('d').checked;

                document.querySelectorAll('input[type=checkbox][id^="mobile"]').forEach(el => {
                    el.disabled = !isMobileSelected; // Aktifkan mobile keyValues hanya jika kategori mobile dipilih
                    el.checked = false; // Hapus ceklis otomatis jika sebelumnya aktif
                });

                document.querySelectorAll('input[type=checkbox][id^="desktop"]').forEach(el => {
                    el.disabled = !isDesktopSelected; // Aktifkan desktop keyValues hanya jika kategori desktop dipilih
                    el.checked = false; // Hapus ceklis otomatis jika sebelumnya aktif
                });
            });
        });

        document.getElementById('scriptForm').addEventListener('submit', (e) => {
            e.preventDefault();

            const akunGAM = document.getElementById('akunGAM').value;
            const adUnit = $('#adUnit').val();
            const deviceCategories = Array.from(
                document.querySelectorAll('input[type=checkbox][id$="m"], input[type=checkbox][id$="d"]:checked')
            ).map(input => input.value);

            if (!deviceCategories.length) {
                alert('Pilih setidaknya satu Device Category.');
                return;
            }

            const keyValues = Array.from(
                document.querySelectorAll('input[type=checkbox][id^="mobile"]:checked, input[type=checkbox][id^="desktop"]:checked')
            ).map(input => input.value);

            if (!keyValues.length) {
                alert('Pilih setidaknya satu Key Value yang sesuai dengan Device Category.');
                return;
            }

            // Filter KeyValues Berdasarkan Device Category
            const mobileKeyValues = keyValues.filter(keyValue => keyValue.startsWith('mobile'));
            const desktopKeyValues = keyValues.filter(keyValue => keyValue.startsWith('desktop'));

            const generateScripts = (keyValues, device) => {
                // Pisahkan keyValues berdasarkan kata kunci (Home, Section, Detail)
                const homeScripts = keyValues
                    .filter(keyValue => keyValue.includes('Home'))
                    .map(keyValue => {
                        const sizes = keyValueSlotSizes[keyValue];
                        console.log(sizes);
                        if (!sizes) {
                            console.error(`Slot sizes not found for keyValue: ${keyValue}`);
                            return '';
                        }
                        // const sizesString = JSON.stringify(sizes).replace(/\[|\]/g, "").split(",").map(x => `[${x}]`).join(",");
                        const sizesString = sizes.map(size => `[${size.join(",")}]`).join(",");
                        return `            googletag.defineSlot('/${akunGAM}/${adUnit}/${device}', [${sizesString}], 'div-gpt-ad-${keyValue}').setTargeting('Position', ['${keyValue}']).addService(googletag.pubads());`;
                    }).join('\n');

                const sectionScripts = keyValues
                    .filter(keyValue => keyValue.includes('Section'))
                    .map(keyValue => {
                        const sizes = keyValueSlotSizes[keyValue];
                        if (!sizes) {
                            console.error(`Slot sizes not found for keyValue: ${keyValue}`);
                            return '';
                        }
                        // const sizesString = JSON.stringify(sizes).replace(/\[|\]/g, "").split(",").map(x => `[${x}]`).join(",");
                        const sizesString = sizes.map(size => `[${size.join(",")}]`).join(",");
                        return `            googletag.defineSlot('/${akunGAM}/${adUnit}/${device}', [${sizesString}], 'div-gpt-ad-${keyValue}').setTargeting('Position', ['${keyValue}']).addService(googletag.pubads());`;
                    }).join('\n');

                const detailScripts = keyValues.filter(keyValue => keyValue.includes('Detail') || keyValue.includes('UnderImage') || keyValue.includes('InArticle'))
                    .map(keyValue => {
                        const sizes = keyValueSlotSizes[keyValue];
                        if (!sizes) {
                            console.error(`Slot sizes not found for keyValue: ${keyValue}`);
                            return '';
                        }
                        // const sizesString = JSON.stringify(sizes).replace(/\[|\]/g, "").split(",").map(x => `[${x}]`).join(",");
                        const sizesString = sizes.map(size => `[${size.join(",")}]`).join(",");
                        return `            googletag.defineSlot('/${akunGAM}/${adUnit}/${device}', [${sizesString}], 'div-gpt-ad-${keyValue}').setTargeting('Position', ['${keyValue}']).addService(googletag.pubads());`;
                    }).join('\n');

                // Gabungkan semua script dengan pembungkus lapisan 1 dan 2
                return `<script>
    var wv = navigator.userAgent.toLowerCase();
    window.googletag = window.googletag || { cmd: [] };
    googletag.cmd.push(function() {
        ${homeScripts ? `@if(Request::segment(1)=="")\n${homeScripts}\n        @endif` : ''}
        ${sectionScripts ? `@if(Request::segment(3)=="" AND Request::segment(1)!="")\n${sectionScripts}\n        @endif` : ''}
        ${detailScripts ? `@if(Request::segment(3)!="")\n${detailScripts}\n        @endif` : ''}
        googletag.pubads().enableSingleRequest();
        googletag.pubads().collapseEmptyDivs();
        googletag.enableServices();
    });
<\/script>`;

            };

            // Generate scripts for mobile and desktop
            const mobileScripts = generateScripts(mobileKeyValues, 'mobile');
            const desktopScripts = generateScripts(desktopKeyValues, 'desktop');

            // Display scripts in respective areas
            document.getElementById('mobileGeneratedScript').textContent = mobileScripts || 'No scripts generated for mobile.';
            document.getElementById('desktopGeneratedScript').textContent = desktopScripts || 'No scripts generated for desktop.';
        });

        // Copy script functionality
        const copyToClipboard = (elementId) => {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('Script copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        };

        document.getElementById('copyMobile').addEventListener('click', () => {
            copyToClipboard('mobileGeneratedScript');
        });

        document.getElementById('copyDesktop').addEventListener('click', () => {
            copyToClipboard('desktopGeneratedScript');
        });
    </script>
</body>

</html>